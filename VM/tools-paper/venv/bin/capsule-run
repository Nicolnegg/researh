#!/home/nicol/Documentos/M2-Cyber/RESEARCH/VM/tools-paper/venv/bin/python3
# ----------------------------------------
import sys
import os.path
# ---------------------------------------
from pulseutils.capsule import ZipCapsule
# ---------------------------------------
# ---------------------------------------
def main(args):
    ZipCapsule(args.capsule)(args.source, args.target)
# ----------------------------------------
# ----------------------------------------
if __name__ == '__main__':
    from argparse import ArgumentParser

    ap = ArgumentParser(description='Capsule Runner')

    g1 = ap.add_argument_group('Core options')
    g1.add_argument('-s', '--source', action='store', required=True, metavar='<source>', help='capsule source')
    g1.add_argument('-t', '--target', action='store', required=True, metavar='<target>', help='capsule target')
    g1.add_argument('-c', '--capsule', action='store', required=True, metavar='<casule.zip>', help='capsule zipfile')

    args = ap.parse_args()

    try:
        main(args)
    except Exception as e:
        #TODO Log
        raise e
        sys.exit(1)
    sys.exit(0)
# ----------------------------------------
